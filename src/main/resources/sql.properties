# =======================================================
# 사용자(users) 테이블 관련 SQL
# =======================================================

# [수정] 사용자 생성을 위한 INSERT 쿼리 (role_id 컬럼 제거)
user.insert=INSERT INTO users (name, phone, email, user_id, password) VALUES (?, ?, ?, ?, ?)

# 사용자 정보 수정을 위한 UPDATE 쿼리 (변경 없음 - 올바른 쿼리)
user.update=UPDATE users SET name = ?, phone = ?, email = ? WHERE id = ?

# ID(PK)로 사용자를 삭제하는 DELETE 쿼리 (변경 없음 - 올바른 쿼리)
user.delete.by_id=DELETE FROM users WHERE id = ?

# [수정] ID(PK)로 특정 사용자를 조회하는 SELECT 쿼리 (3개 테이블 JOIN으로 변경)
user.select.by_id=SELECT u.*, GROUP_CONCAT(r.role_name SEPARATOR ', ') as role_name FROM users u LEFT JOIN users_roles ur ON u.id = ur.user_id LEFT JOIN roles r ON ur.role_id = r.role_id WHERE u.id = ? GROUP BY u.id

# 전체 사용자 조회 쿼리 (올바르게 수정된 쿼리)
user.select.all=SELECT u.*, GROUP_CONCAT(r.role_name SEPARATOR ', ') as role_name FROM users u LEFT JOIN users_roles ur ON u.id = ur.user_id LEFT JOIN roles r ON ur.role_id = r.role_id GROUP BY u.id

# 로그인 ID로 특정 사용자 조회 쿼리 (올바르게 수정된 쿼리)
user.select.by_user_id=SELECT u.*, GROUP_CONCAT(r.role_name SEPARATOR ', ') as role_name FROM users u LEFT JOIN users_roles ur ON u.id = ur.user_id LEFT JOIN roles r ON ur.role_id = r.role_id WHERE u.user_id = ? GROUP BY u.id


# =======================================================
# users_roles 테이블 관련 SQL (신규 추가)
# =======================================================

# [삭제] user.update.role 쿼리는 더 이상 필요 없으므로 삭제합니다.

# [신규] 특정 사용자의 모든 역할을 삭제하는 쿼리
user_roles.delete.by_user_id=DELETE FROM users_roles WHERE user_id = ?

# [신규] 특정 사용자에게 역할을 부여하는 쿼리
user_roles.insert=INSERT INTO users_roles (user_id, role_id) VALUES (?, ?)

