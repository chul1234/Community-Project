# users 테이블 관련 기본 쿼리 (수정 없음)
user.insert=INSERT INTO users (user_id, name, phone, email, password) VALUES (?, ?, ?, ?, ?)
user.update=UPDATE users SET name = ?, phone = ?, email = ? WHERE user_id = ?
user.delete.by_user_id=DELETE FROM users WHERE user_id = ?

# [최종 수정] 로그인용 쿼리: Spring Security가 사용할 role_ids만 정확히 가져옵니다.
user.select.by_user_id=SELECT u.*, GROUP_CONCAT(r.role_id SEPARATOR ', ') as role_ids FROM users u LEFT JOIN users_roles ur ON u.user_id = ur.user_id LEFT JOIN roles r ON ur.role_id = r.role_id WHERE u.user_id = ? GROUP BY u.user_id

# [최종 수정] 사용자 목록 조회용 쿼리: 역할 ID(role_ids)와 역할 이름(role_names)을 모두 가져오도록 변경
user.select.all=SELECT u.*, GROUP_CONCAT(r.role_id SEPARATOR ', ') as role_ids, GROUP_CONCAT(r.role_name SEPARATOR ', ') as role_names FROM users u LEFT JOIN users_roles ur ON u.user_id = ur.user_id LEFT JOIN roles r ON ur.role_id = r.role_id GROUP BY u.user_id

# users_roles 관련 쿼리 (수정 없음)
user_roles.delete.by_user_id=DELETE FROM users_roles WHERE user_id = ?
user_roles.insert=INSERT INTO users_roles (user_id, role_id) VALUES (?, ?)