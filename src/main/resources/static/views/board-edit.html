<!-- 수정됨: 게시글 수정 화면에서 Summernote 에디터 사용 (본문 이미지 업로드 UI 제거) -->

<div
    class="container"
    ng-init="initEditor()"
>
    <div class="page-header">
        <h1>게시글 수정</h1>
        <a
            href=""
            ng-click="cancelEdit()"
            class="cancel-link"
            >취소 (상세보기로 돌아가기)</a
        >
    </div>

    <form
        name="postForm"
        novalidate
    >
        <div class="form-group">
            <label for="postTitle">제목</label>
            <input
                type="text"
                id="postTitle"
                ng-model="post.title"
                required
                class="form-control"
            />
        </div>

        <div class="form-group">
            <label for="postContent">내용</label>
            <!-- Summernote가 덮어쓸 textarea -->
            <textarea
                id="postContent"
                ng-model="post.content"
                required
                rows="10"
                class="form-control"
                style="width: 100%"
            ></textarea>
        </div>
    </form>

    <hr style="margin: 30px 0" />

    <div
        class="existing-files"
        ng-if="fileList && fileList.length > 0"
    >
        <h3>기존 첨부 파일</h3>
        <ul>
            <li ng-repeat="file in fileList">
                {{ file.original_name }}
                <span style="color: #6c757d; font-size: 12px"> ({{ file.file_size | number }} bytes) </span>

                <label style="margin-left: 10px">
                    <input
                        type="checkbox"
                        ng-model="file._delete"
                    />
                    삭제
                </label>
            </li>
        </ul>
    </div>

    <div
        ng-if="!fileList || fileList.length === 0"
        style="color: #6c757d; margin-bottom: 20px"
    >
        첨부된 파일이 없습니다.
    </div>

    <hr style="margin: 20px 0" />

    <div class="new-files">
        <h3>파일 추가</h3>
        <input
            type="file"
            multiple
            file-model="newFiles"
        />
        <!-- 드래그 앤 드롭 업로드 영역 -->
        <div id="fileDropZoneEdit"
            class="file-drop-zone"
            style="margin-top:10px; padding:12px; border:2px dashed #ccc; border-radius:4px; text-align:center; color:#666;">
            각 영역에 파일을 끌어다 놓으면 새 첨부파일로 추가됩니다.
        </div>

        <div
            ng-if="newFiles.length > 0"
            style="margin-top: 10px; font-size: 14px"
        >
            <strong>{{ newFiles.length }}</strong>개의 파일 선택됨
            <ul style="margin-top: 5px; padding-left: 20px">
                <li ng-repeat="file in newFiles">
                    {{ file.webkitRelativePath || file.name }}
                    ({{ file.size}} bytes)
                </li>
            </ul>
        </div>
    </div>

    <hr style="margin: 30px 0" />

    <button
        type="button"
        ng-click="saveChanges()"
        ng-disabled="postForm.$invalid"
        class="submit-btn-full"
    >
        수정 완료
    </button>
</div>

<!-- 수정됨 끝 -->
