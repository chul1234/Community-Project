<div ng-controller="BoardEditController" class="container">
    <div class="page-header">
        <h1>게시글 수정</h1>
        <a href="" ng-click="cancelEdit()" class="cancel-link">취소 (상세보기로 돌아가기)</a>
    </div>

    <form name="postForm" novalidate>
        <div class="form-group">
            <label for="postTitle">제목</label>
            <input type="text" id="postTitle" ng-model="post.title" required class="form-control" />
        </div>

        <div class="form-group">
            <label for="postContent">내용</label>
            <textarea id="postContent"
                      ng-model="post.content"
                      required
                      rows="10"
                      class="form-control" 
                      style="width: 100%;"></textarea>
        </div>
    </form>

    <hr style="margin: 30px 0;" />

    <div class="existing-files" ng-if="fileList && fileList.length > 0">
        <h3>기존 첨부 파일</h3>
        <ul>
            <li ng-repeat="file in fileList">
                {{ file.original_name }}
                <span style="color:#6c757d; font-size:12px">
                    ({{ file.file_size | number }} bytes)
                </span>

                <label style="margin-left:10px;">
                    <input type="checkbox" ng-model="file._delete" />
                    삭제
                </label>
            </li>
        </ul>
    </div>

    <div ng-if="!fileList || fileList.length === 0" style="color:#6c757d; margin-bottom:20px;">
        첨부된 파일이 없습니다.
    </div>

    <hr style="margin: 20px 0;" />

    <div class="new-files">
        <h3>파일 추가</h3>
        <input type="file" multiple file-model="newFiles" />
        <div ng-if="newFiles.length > 0" style="margin-top: 10px; font-size: 14px;">
            <strong>{{ newFiles.length }}</strong>개의 파일 선택됨
        </div>
    </div>

    <hr style="margin: 30px 0;" />

    <button type="button"
            ng-click="saveChanges()"
            ng-disabled="postForm.$invalid"
            class="submit-btn-full">
        수정 완료
    </button>

</div>