<div class="container" ng-controller="BoardNewController">
    <!-- ★ 수정됨: 공통 페이지 헤더 스타일 사용 -->
    <div class="page-header">
        <h1>게시글 작성</h1>
        <a href="#!/board" class="cancel-link">← 목록으로</a>
    </div>

    <!-- ★ 수정됨: user-entry-card 레이아웃 재사용 -->
    <div class="user-entry-card">
        <div class="card-header">
            <h4>게시글 정보</h4>
        </div>
        <div class="card-body">
            <form
                ng-submit="submitPost()"
                enctype="multipart/form-data"
                class="board-new-form"
            >
                <!-- 제목 -->
                <div class="form-group">
                    <label for="title">제목</label>
                    <input
                        id="title"
                        type="text"
                        class="form-control"
                        ng-model="post.title"
                        required
                    />
                </div>

                <!-- 내용 -->
                <div class="form-group">
                    <label for="postEditor">내용</label>
                    <textarea
                        id="postEditor"
                        class="form-control"
                        ng-model="post.content"
                    ></textarea>
                    <!-- 본문 이미지 업로드 (에디터 없이) -->
<div class="form-group">
    <label>본문 이미지 업로드</label>
    <div style="display: flex; gap: 8px; align-items: center;">
        <input
            type="file"
            accept="image/*"
            file-model="inlineImageFilesNew"  
        />
        <button
            type="button"
            class="secondary-btn"
            ng-click="uploadInlineImageForNew()"
        >
            본문에 삽입
        </button>
    </div>
    <div style="font-size: 12px; color: #6c757d; margin-top: 4px;">
        이미지를 선택한 뒤 "본문에 삽입"을 누르면, 현재 커서 위치에 이미지 태그가 들어갑니다.
    </div>
</div>

                </div>

                <!-- : 파일 업로드 -->
                <!-- : 파일 업로드 -->
<div class="form-group">
    <label for="fileInput">첨부 파일</label>

    <!-- 1) 일반 파일 선택 (지금 쓰던 거 그대로) -->
    <input
        type="file"
        id="fileInput"
        multiple
        file-model="uploadFiles"
    />

    <!-- 2) 폴더 선택 (2번 기능) -->
    <div style="margin-top: 8px;">
        <label style="font-size: 14px;">
            폴더 선택:
            <input
                type="file"
                multiple
                webkitdirectory
                directory
                file-model="uploadFolderFiles"
            />
        </label>
        <div style="font-size: 12px; color: #6c757d; margin-top: 4px;">
            ※ 폴더를 선택하면, 그 폴더 안의 모든 파일이 함께 업로드됩니다.
        </div>
    </div>

    <!-- 3) 업로드 예정 목록 (파일 + 폴더 합친 리스트, 3번 기능 아이콘 포함) -->
    <ul
        class="file-upload-list"
        ng-if="getAllUploadFiles().length > 0"
        style="margin-top: 10px;"
    >
        <li ng-repeat="file in getAllUploadFiles()">
            <!-- 폴더에서 온 파일이면 폴더 아이콘 -->
            <span ng-if="isFolderFile(file)" style="margin-right: 4px;">📁</span>
            <!-- 일반 파일 중 이미지면 그림 아이콘 -->
            <span ng-if="!isFolderFile(file) && isImageFile(file)" style="margin-right: 4px;">🖼️</span>
            <!-- 나머지는 일반 파일 아이콘 -->
            <span ng-if="!isFolderFile(file) && !isImageFile(file)" style="margin-right: 4px;">📄</span>

            <!-- 표시 이름: 폴더 선택 파일이면 '폴더/파일명', 아니면 그냥 파일명 -->
            {{ getDisplayName(file) }} ({{file.size}} bytes)
        </li>
    </ul>

    <!-- 아무것도 선택 안 한 상태 -->
    <div
        ng-if="getAllUploadFiles().length === 0"
        style="font-size: 13px; color: #6c757d; margin-top: 4px;"
    >
        선택된 파일이 없습니다.
    </div>
</div>


                <!-- 버튼 영역 -->
                <div class="button-group">
                    <button
                        type="submit"
                        class="submit-btn-full"
                    >
                        등록
                    </button>
                    <button
                        type="button"
                        class="secondary-btn"
                        ng-click="cancel()"
                    >
                        취소
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
