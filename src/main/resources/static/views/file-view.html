<div class="container" ng-if="file">
    <div class="action-bar">
        <h2>파일 미리보기</h2>
        <button
            type="button"
            class="action-btn"
            ng-click="goBack()"
            style="margin-left:auto"
        >
            ← 뒤로가기
        </button>
    </div>

    <div class="file-preview-box">
        <!-- 이미지인 경우: 미리보기 -->
        <div ng-if="isImage">
            <div style="margin-bottom:10px; font-weight:bold;">
                이미지 미리보기
            </div>
            <img
                ng-src="{{ viewUrl }}"
                alt="{{ file.original_name }}"
                style="max-width:100%; max-height:500px; border:1px solid #ddd; border-radius:4px;"
            />
        </div>

        <!-- 이미지가 아닌 경우 -->
        <div ng-if="!isImage">
            <div style="font-size:14px; margin-bottom:10px;">
                이 파일 형식은 브라우저에서 미리보기를 지원하지 않습니다.
            </div>
            <div style="font-size:40px;">📄</div>
        </div>
    </div>

    <div class="file-info-box" style="margin-top:20px;">
        <table class="user-table">
            <tr>
                <th style="width:20%;">파일명</th>
                <td>{{ file.original_name }}</td>
            </tr>
            <tr>
                <th>파일 크기</th>
                <td>{{ file.file_size | number }} bytes</td>
            </tr>
            <tr>
                <th>콘텐츠 타입</th>
                <td>{{ file.content_type || '알 수 없음' }}</td>
            </tr>
            <tr>
                <th>게시글 ID</th>
                <td>{{ file.post_id }}</td>
            </tr>
        </table>
    </div>

    <div style="margin-top:20px;">
        <a
            class="action-btn"
            ng-href="{{ downloadUrl }}"
            style="background-color:#007bff; color:white; margin-right:10px;"
        >
            ⬇ 다운로드
        </a>
        <button
            type="button"
            class="action-btn"
            ng-click="goBack()"
        >
            닫기
        </button>
    </div>
</div>

<!-- 로딩 중 또는 파일 없음 -->
<div class="container" ng-if="!file">
    <p>파일 정보를 불러오는 중입니다...</p>
</div>
