<div class="container"> <div ng-if="!isEditing">
        <h1>{{ post.title }}</h1> <div style="color: #6c757d; margin-bottom: 20px; border-bottom: 1px solid #dee2e6; padding-bottom: 15px;">
            <span>ì‘ì„±ì: {{ post.author_name || 'íƒˆí‡´í•œ ì‚¬ìš©ì' }} ({{ post.user_id }})</span>
            <span style="margin-left: 15px;">ì¡°íšŒ: {{ post.view_count }}</span> <span style="float: right;">ì‘ì„±ì¼: {{ post.created_at | date:'yyyy-MM-dd HH:mm' }}</span>
        </div>
        <div class="post-content" ng-bind-html="trustedContent" style="min-height: 200px; margin-bottom: 40px; white-space: pre-wrap;"></div>
        
        <div class="action-bar">
            <div ng-if="canModify">
                <button type="button" ng-click="switchToEditMode()">ìˆ˜ì •</button>
                <button type="button" ng-click="deletePost()" class="delete-btn">ì‚­ì œ</button>

                <button type="button" 
                        ng-if="currentUser.role === 'ADMIN' && post.pinned_order === null"
                        ng-click="pinPost()">
                    ğŸ·ï¸ ê³ ì •í•˜ê¸°
                </button>
                
                <button type="button" 
                        ng-if="currentUser.role === 'ADMIN' && post.pinned_order !== null"
                        ng-click="unpinPost()" 
                        class="delete-btn">
                    ğŸ·ï¸ ê³ ì • í•´ì œ
                </button>

            </div>
            <a href="#!/board" class="action-btn">ëª©ë¡ìœ¼ë¡œ</a>
        </div>
        </div>

    <div ng-if="isEditing">
        <h1>ê²Œì‹œê¸€ ìˆ˜ì •</h1>
        <form name="editForm" novalidate>
            <div class="form-group">
                <label>ì œëª©</label>
                <input type="text" ng-model="editData.title" required class="form-control" />
            </div>
            <div class="form-group">
                <label>ë‚´ìš©</label>
                <textarea ng-model="editData.content" required rows="10" class="form-control" style="width: 100%;"></textarea>
            </div>
        </form>
        <div class="action-bar">
            <div class="button-group">
                <button type="button" ng-click="saveChanges()" ng-disabled="editForm.$invalid" class="submit-btn-full">ìˆ˜ì • ì™„ë£Œ</button>
                <button type="button" ng-click="cancelEdit()" class="secondary-btn">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <hr> <div class="comments-section">
        <h2>ëŒ“ê¸€</h2>
        <div class="comment-list">
            <div ng-if="!comments.length" class="no-comments">
                ì•„ì§ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ëŒ“ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!
            </div>
            <div class="comment-item" ng-repeat="comment in comments">
                <div ng-if="!comment.isEditing">
                    <div class="comment-header">
                        <strong>{{ comment.author_name ||'íƒˆí‡´í•œ ì‚¬ìš©ì' }}</strong> ({{ comment.user_id }})
                        <span class="comment-date">{{ comment.created_at | date:'yyyy-MM-dd HH:mm' }}</span>
                    </div>
                    <p class="comment-content">{{ comment.content }}</p>
                    <div class="comment-actions" ng-if="canModifyComment(comment)">
                        <button ng-click="switchToCommentEditMode(comment)" class="action-btn-sm">ìˆ˜ì •</button>
                        <button ng-click="deleteComment(comment.comment_id)" class="action-btn-sm delete">ì‚­ì œ</button>
                    </div>
                </div>
                <div ng-if="comment.isEditing">
                    <textarea ng-model="comment.editContent" class="form-control" rows="3" style="width: 100%; box-sizing: border-box;"></textarea>
                    <div class="comment-actions" style="margin-top: 5px;">
                        <button ng-click="saveCommentChanges(comment)" class="action-btn-sm save">ì €ì¥</button>
                        <button ng-click="cancelCommentEdit(comment)" class="action-btn-sm">ì·¨ì†Œ</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="comment-form">
            <form name="commentForm">
                <textarea ng-model="newComment.content" required placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”" class="form-control" rows="4"></textarea>
                <button ng-click="submitComment()" ng-disabled="commentForm.$invalid" class="submit-btn" style="width: 100%; margin-top: 10px;">ëŒ“ê¸€ ë“±ë¡</button>
            </form>
        </div>
    </div>
</div>