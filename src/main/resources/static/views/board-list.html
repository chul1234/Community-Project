<div class="container">
    <div class="action-bar">
        <h1>ê²Œì‹œíŒ</h1>
        <div style="margin-left: auto; display: flex; align-items: center">
            <button
                type="button"
                class="action-btn"
                ng-show="!showSearch"
                ng-click="openSearch()"
                style="background-color: #6c757d; color: white; margin-right: 10px"
            >
                ğŸ” ê²€ìƒ‰
            </button>
            <div
                class="search-bar"
                style="display: flex; align-items: center; margin-right: 10px"
                ng-show="showSearch"
            >
                <select
                    ng-model="searchType"
                    style="height: 35px; border-radius: 4px; border: 1px solid #ccc; margin-right: 5px"
                >
                    <option value="title">ì œëª©</option>
                    <option value="content">ë‚´ìš©</option>
                    <option value="title_content">ì œëª©+ë‚´ìš©</option>
                    <option value="author">ì‘ì„±ì</option>
                    <option value="author_content">ì‘ì„±ì+ë‚´ìš©</option>
                    <option value="time">ì‘ì„±ëœ ì‹œê°„(0-23ì‹œ)</option>
                </select>
                <input
                    type="text"
                    ng-model="searchKeyword"
                    placeholder="ê²€ìƒ‰ì–´ (ì‹œê°„ì€ 0~23 ì…ë ¥)"
                    style="height: 33px; border: 1px solid #ccc; border-radius: 4px; padding: 0 8px; margin-right: 5px"
                />
                <button
                    type="button"
                    ng-click="searchPosts()"
                    class="action-btn"
                    style="background-color: #5a6268; color: white"
                >
                    ê²€ìƒ‰
                </button>

                <button
                    type="button"
                    ng-click="closeSearch()"
                    class="action-btn"
                    style="background-color: #dc3545; color: white; margin-left: 5px; padding: 6px 10px"
                >
                    X
                </button>
            </div>
            <select
                ng-model="pageSize"
                ng-change="pageSizeChanged()"
                style="height: 35px; border-radius: 4px; border: 1px solid #ccc; margin-right: 10px"
            >
                <option value="5">5ê°œì”© ë³´ê¸°</option>
                <option value="10">10ê°œì”© ë³´ê¸°</option>
                <option value="15">15ê°œì”© ë³´ê¸°</option>
                <option value="20">20ê°œì”© ë³´ê¸°</option>
            </select>

            <a
                href="#!/board/new"
                class="action-btn create-btn"
                >ê¸€ì“°ê¸°</a
            >
        </div>
    </div>

    <table class="user-table">
        <thead>
            <tr>
                <th style="width: 10%">ë²ˆí˜¸</th>
                <th style="width: 45%">ì œëª©</th>
                <th style="width: 15%">ì‘ì„±ì</th>
                <th style="width: 20%">ì‘ì„±ì¼</th>
                <th style="width: 10%">ì¡°íšŒìˆ˜</th>
                <!-- : ì¢‹ì•„ìš” ì»¬ëŸ¼ í—¤ë” -->
                <th>ì¢‹ì•„ìš”</th>
                <!--  ë -->
            </tr>
        </thead>
        <tbody>
            <tr ng-if="!postList.length && totalItems === 0 && !searchKeyword">
                <!-- â˜… ìˆ˜ì •ë¨: ì»¬ëŸ¼ ìˆ˜ê°€ 6ê°œê°€ ë˜ì—ˆìœ¼ë¯€ë¡œ colspan 6 -->
                <td
                    colspan="6"
                    style="text-align: center; color: #777"
                >
                    ì‘ì„±ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
                </td>
            </tr>
            <tr ng-if="!postList.length && totalItems === 0 && searchKeyword">
                <!-- â˜… ìˆ˜ì •ë¨: ì»¬ëŸ¼ ìˆ˜ê°€ 6ê°œê°€ ë˜ì—ˆìœ¼ë¯€ë¡œ colspan 6 -->
                <td
                    colspan="6"
                    style="text-align: center; color: #777"
                >
                    '{{searchKeyword}}'ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
                </td>
            </tr>
            <tr
                ng-repeat="post in postList"
                ng-class="{'pinned-post': post.pinned_order !== null}"
            >
                <td>
                    <span
                        ng-if="post.pinned_order !== null"
                        style="font-weight: bold; color: #007bff"
                        >ê³µì§€</span
                    >
                    <span ng-if="post.pinned_order === null">{{ totalItems - (currentPage - 1) * pageSize - $index }}</span>
                </td>
                <td>
                    <span
                        ng-if="post.pinned_order !== null"
                        style="margin-right: 5px"
                        >ğŸ·ï¸</span
                    >
                    <a href="#!/board/{{ post.post_id }}">{{ post.title }}</a>
                </td>
                <td>{{ post.author_name || 'íƒˆí‡´í•œ ì‚¬ìš©ì' }} ({{ post.user_id }})</td>
                <td>{{ post.created_at | date:'yyyy-MM-dd HH:mm' }}</td>
                <td>{{ post.view_count }}</td>

                <!-- : ëª©ë¡ì—ì„œ ê²Œì‹œê¸€ ì¢‹ì•„ìš” ë²„íŠ¼/ì¹´ìš´íŠ¸ -->
                <td>
                    <button
                        type="button"
                        class="action-btn-sm"
                        ng-click="togglePostLike(post)"
                    >
                        <span ng-class="{'liked': post.likeCount > 0}">â™¥</span>
                        {{ post.likeCount || 0 }}
                    </button>
                </td>
                <!--  ë -->
            </tr>
        </tbody>
    </table>

    <div
        class="pagination-container"
        ng-if="totalPages > 1"
        style="text-align: center; margin-top: 20px"
    >
        <button
            ng-click="goToPage(currentPage - 1)"
            ng-disabled="currentPage === 1"
            style="margin-right: 5px"
        >
            &lt; ì´ì „
        </button>

        <!-- â–¼â–¼â–¼ [ìˆ˜ì •] í•œ ë²ˆì— 10ê°œë§Œ ë³´ì´ë„ë¡ ë³€ê²½ â–¼â–¼â–¼ -->
        <span
            ng-repeat="page in getPageRange() track by $index"
            style="margin: 0 2px"
        >
            <a
                href=""
                ng-click="goToPage(page)"
                ng-style="{
                    'font-weight': (currentPage === page) ? 'bold' : 'normal', 
                    'text-decoration': (currentPage === page) ? 'none' : 'underline' 
               }"
            >
                {{ page }}
            </a>
        </span>
        <!-- â–²â–²â–² [ìˆ˜ì • ë] â–²â–²â–² -->

        <button
            ng-click="goToPage(currentPage + 1)"
            ng-disabled="currentPage === totalPages"
            style="margin-left: 5px"
        >
            ë‹¤ìŒ &gt;
        </button>
    </div>
</div>
