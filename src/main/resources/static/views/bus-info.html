<!-- ìˆ˜ì •ë¨: íƒ‘ìŠ¹ ìƒì„¸(ìŠ¹ì°¨ êµ¬ê°„)ì—ì„œ ë²„ìŠ¤/íŠ¸ë¨ ì´ëª¨ì§€ ì•„ì´ì½˜ í‘œì‹œ ì¶”ê°€
     - ë„ë³´ëŠ” ê¸°ì¡´ ğŸš¶ ìœ ì§€
     - ìŠ¹ì°¨ êµ¬ê°„(p.type !== 'WALK')ì—ì„œ p.label ê¸°ì¤€ìœ¼ë¡œ ğŸšŒ(ë²„ìŠ¤), ğŸš‹(íŠ¸ë¨) í‘œì‹œ -->

<div class="container bus-page">
    <!-- ìƒë‹¨: ì œëª©(ì¢Œ) + ìƒíƒœ/ì œì–´(ìš°, í•œ ì¤„ ê³ ì •) -->
    <div class="bus-topbar">
        <div class="bus-topbar-left">
            <h2 class="bus-page-title">ë²„ìŠ¤ ë…¸ì„  ê´€ë¦¬</h2>
        </div>

        <div class="bus-topbar-right">
            <!-- ìƒíƒœ ë°°ì§€ -->
            <span
                class="badge badge-collector"
                ng-class="{'on': (collectorStatus && collectorStatus.running), 'off': !(collectorStatus && collectorStatus.running)}"
            >
                â— ìˆ˜ì§‘: {{ (collectorStatus && collectorStatus.running) ? 'ON' : 'OFF' }}
                <span class="badge-sub" ng-if="collectorStatusText">({{ collectorStatusText }})</span>
            </span>

            <span
                class="badge badge-refresh"
                ng-class="{'on': isAutoRefreshOn, 'off': !isAutoRefreshOn}"
            >
                â†» ìë™ê°±ì‹ : {{ isAutoRefreshOn ? 'ON' : 'OFF' }}
            </span>

            <!-- ì œì–´ ë²„íŠ¼(ìƒë‹¨ í•œ ì¤„) -->
            <div class="top-controls">
                <button
                    type="button"
                    class="btn-top-control btn-top-refresh-on"
                    ng-click="enableAutoRefresh()"
                    ng-disabled="isAutoRefreshOn"
                >
                    â–¶ ìë™ê°±ì‹ 
                </button>

                <button
                    type="button"
                    class="btn-top-control btn-top-refresh-off"
                    ng-click="disableAutoRefresh()"
                    ng-disabled="!isAutoRefreshOn"
                >
                    â¸ ë©ˆì¶¤
                </button>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ë ˆì´ì•„ì›ƒ: ì¢Œ(ì§€ë„) + ìš°(ì»¨íŠ¸ë¡¤) -->
    <div class="bus-main-grid">

        <!--
            íƒ‘ìŠ¹ ìƒì„¸(ê²½ë¡œ ë‹¨ê³„)ë§Œ "ì¢Œì¸¡ ìŠ¬ë¼ì´ë“œ ë“œë¡œì–´"ë¡œ ë¶„ë¦¬
            - ë‹¤ë¥¸ íŒ¨ë„(ê²€ìƒ‰/ê²½ë¡œì„¤ì •/ëª©ë¡/ì§€ë„)ì€ ê¸°ì¡´ ìœ„ì¹˜ ê·¸ëŒ€ë¡œ ìœ ì§€
            - í† ê¸€ ë²„íŠ¼ì€ (1) ìƒë‹¨ ê²½ë¡œ ìŠ¤íŠ¸ë¦½ì˜ "íƒ‘ìŠ¹ ìƒì„¸" ë²„íŠ¼, (2) ë“œë¡œì–´ íƒ­(í™”ì‚´í‘œ) ì œê³µ
        -->
        <div class="bus-path-drawer" ng-class="{ 'open': isPathDetailsOpen }">
            <button
                type="button"
                class="bus-path-drawer-tab"
                ng-click="togglePathDetails()"
                aria-label="íƒ‘ìŠ¹ ìƒì„¸ ì—´ê¸°/ë‹«ê¸°"
            >
                <span ng-if="!isPathDetailsOpen">â–¶</span>
                <span ng-if="isPathDetailsOpen">â—€</span>
            </button>

            <div class="bus-path-drawer-body">
                <div class="bus-path-drawer-title">íƒ‘ìŠ¹ ìƒì„¸</div>

                <div class="bus-path-drawer-route">
                    <span class="label">ì¶œë°œ</span>
                    <span class="value">{{ (pathStartStop && (pathStartStop.nodenm || pathStartStop.name)) || 'ë¯¸ì„ íƒ' }}</span>
                    <span class="sep">â†’</span>
                    <span class="label">ë„ì°©</span>
                    <span class="value">{{ (pathEndStop && (pathEndStop.nodenm || pathEndStop.name)) || 'ë¯¸ì„ íƒ' }}</span>
                </div>

                
                <div class="bus-path-drawer-steps" ng-if="pathDisplayParts && pathDisplayParts.length">
                    <div class="path-timeline">
                        <div class="path-tl-item" ng-repeat="p in pathDisplayParts track by $index"
                             ng-class="{'walk': (p.type === 'WALK'), 'ride': (p.type !== 'WALK')}">
                            <!-- ì¢Œì¸¡ ë ˆì¼(ì„¸ë¡œ ë¼ì¸) + ë…¸ë“œ -->
                            <div class="path-tl-rail">
                                <div class="path-tl-dot"
                                     ng-style="p.type !== 'WALK' ? {'background': getPathTimelineColor($index)} : {}"></div>
                                <div class="path-tl-line"
                                     ng-style="p.type !== 'WALK' ? {'background': getPathTimelineColor($index)} : {}"></div>
                            </div>

                            <!-- ë³¸ë¬¸ -->
                            <div class="path-tl-body">
                                <!-- ë„ë³´(í™˜ìŠ¹) -->
                                <div class="path-tl-walk" ng-if="p.type === 'WALK'">
                                    <div class="path-tl-walk-title">
                                        ğŸš¶ ë„ë³´ {{ p.minutes }}ë¶„
                                        <span class="path-tl-transfer"
                                              ng-if="($index > 0 && pathDisplayParts[$index-1].type !== 'WALK') && ($index < pathDisplayParts.length-1 && pathDisplayParts[$index+1].type !== 'WALK')">
                                            í™˜ìŠ¹
                                        </span>
                                    </div>
                                </div>

                                <!-- ìŠ¹ì°¨ êµ¬ê°„(ë²„ìŠ¤/íŠ¸ë¨) -->
                                <div class="path-tl-ride" ng-if="p.type !== 'WALK'">
                                    <div class="path-tl-ride-title">
                                        <span class="path-tl-ride-color" ng-style="{'background': getPathTimelineColor($index)}"></span>

                                        <!-- ìˆ˜ì •ë¨: ìŠ¹ì°¨ êµ¬ê°„ ì•„ì´ì½˜(ì´ëª¨ì§€) ì¶”ê°€ -->
                                        <span class="path-tl-ride-emoji"
                                              ng-if="(p.label || '').indexOf('ë²„ìŠ¤') === 0">ğŸšŒ</span>
                                        <span class="path-tl-ride-emoji"
                                              ng-if="(p.label || '').indexOf('íŠ¸ë¨') === 0">ğŸš‹</span>
                                        <span class="path-tl-ride-emoji"
                                              ng-if="(p.label || '').indexOf('ë²„ìŠ¤') !== 0 && (p.label || '').indexOf('íŠ¸ë¨') !== 0">ğŸšŒ</span>

                                        <!--
                                          ìˆ˜ì •ë¨: ë¼ë²¨ì´ ë¹„ì–´ ë³´ì´ëŠ” ì¼€ì´ìŠ¤ ë°©ì§€
                                          - formatPathLabel ë°”ì¸ë”©/ìºì‹œ/ë°ì´í„° ì´ìŠˆë¡œ ê²°ê³¼ê°€ ''ê°€ ë˜ë”ë¼ë„ p.label ë˜ëŠ” ê¸°ë³¸ê°’ì„ í‘œì‹œ
                                        -->
                                        <span class="path-tl-ride-badge">
                                            {{ (formatPathLabel ? formatPathLabel(p.label) : '') || p.label || 'ìŠ¹ì°¨' }}
                                        </span>
                                    </div>

                                    <!-- NOTE:
                                         - í˜„ì¬ í”„ë¡œì íŠ¸ì˜ pathDisplayPartsëŠ” 'ë²„ìŠ¤(108ë²ˆ)' ê°™ì€ ë¼ë²¨ê³¼ minutesë§Œ í™•ì •ì ìœ¼ë¡œ ê°€ì§„ë‹¤.
                                         - ìŠ¹ì°¨/í•˜ì°¨ ì •ë¥˜ì¥ëª…ì€ ì„œë²„ ì‘ë‹µ êµ¬ì¡°ì— ë”°ë¼ ì—†ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì—¬ê¸°ì„œëŠ” 'êµ¬ì¡°ë§Œ' ë§Œë“¤ì–´ë‘ê³ 
                                           ê°’ì´ ìˆìœ¼ë©´ í‘œì‹œë˜ë„ë¡ ì•ˆì „ ì²˜ë¦¬í•œë‹¤.
                                    -->
                                    <div class="path-tl-ride-row" ng-if="p.fromName">
                                        ìŠ¹ì°¨: <span class="path-tl-place">[{{ p.fromName }}]</span>
                                        <!-- [ì‹ ê·œ] ì‹¤ì‹œê°„ ë„ì°©ì •ë³´ í‘œì‹œ (ìë™ ì¡°íšŒë¨) -->
                                        <span class="txt-realtime" ng-if="p.realTimeInfo" style="color: #d6336c; font-weight: bold; margin-left: 6px; font-size: 11px; white-space: nowrap;">
                                            {{ p.realTimeInfo }}
                                        </span>
                                    </div>
                                    <div class="path-tl-ride-row path-tl-duration">
                                        â± {{ p.minutes }}ë¶„ ì´ë™
                                    </div>
                                    <div class="path-tl-ride-row" ng-if="p.toName">
                                        í•˜ì°¨: <span class="path-tl-place">[{{ p.toName }}]</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bus-path-drawer-empty" ng-if="!(pathDisplayParts && pathDisplayParts.length)">
                    ì•„ì§ ê²½ë¡œê°€ ì—†ìŠµë‹ˆë‹¤.
                </div>
            </div>
        </div>

        <!-- ì¢Œì¸¡: ì§€ë„ ì˜ì—­ -->
        <div class="bus-map-area">
            <!-- í˜„ì¬ ê²½ë¡œ ìš”ì•½(ì§€ë„ ìœ„) -->
            <div class="bus-path-strip">
                <strong>[í˜„ì¬ ê²½ë¡œ ì„¤ì •]</strong>
                ì¶œë°œ:
                <span class="path-start">
                    {{ (pathStartStop && (pathStartStop.nodenm || pathStartStop.stationName)) || 'ë¯¸ì„ íƒ' }}
                </span>
                â†’ ë„ì°©:
                <span class="path-end">
                    {{ (pathEndStop && (pathEndStop.nodenm || pathEndStop.stationName)) || 'ë¯¸ì„ íƒ' }}
                </span>

                <span class="path-hint" ng-if="!pathStartStop || !pathEndStop">
                    (ëª©ë¡ì—ì„œ 'ì¶œë°œ'/'ë„ì°©' ë²„íŠ¼ì„ ëˆŒëŸ¬ ì„ íƒ)
                </span>
<!-- ê²½ë¡œ ìš”ì•½(ê°„ê²°) + ìƒì„¸ í¼ì¹¨(ëŒ€ê¸° ë¯¸í‘œì‹œ) -->
                <!-- ê²½ë¡œ ìš”ì•½(ê°„ê²°) + ìƒì„¸ í¼ì¹¨(ëŒ€ê¸° ë¯¸í‘œì‹œ) -->
                <div class="path-summary" ng-if="pathCandidates && pathCandidates.length > 0">
                    <!-- í™˜ìŠ¹ ì˜µì…˜ ì¹© (ê°€ë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥) -->
                    <div class="path-candidates-chips">
                        <div 
                            ng-repeat="cand in pathCandidates"
                            class="path-chip"
                            ng-class="{'active': selectedPathCandidate === cand}"
                            ng-click="selectPathCandidate(cand)"
                        >
                            <span class="chip-label">{{ cand.usedTransfers == 0 ? 'ì§í–‰' : cand.usedTransfers + 'íšŒ í™˜ìŠ¹' }}</span>
                            <span class="chip-time">{{ Math.round(cand.totalMinutes) }}ë¶„</span>
                        </div>
                    </div>

                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div>
                            <span class="path-summary-item">ğŸ•’ ì•½ {{ pathTotalMinutes }}ë¶„</span>
                            <span class="path-summary-sep">|</span>
                            <span class="path-summary-item">ğŸšŒ ìŠ¹ì°¨ {{ pathRideCount }}íšŒ</span>
                            <span class="path-summary-sep">|</span>
                            <span class="path-summary-item">ğŸš¶ ë„ë³´ {{ pathWalkCount }}íšŒ</span>
                        </div>

                        <button
                            type="button"
                            class="path-details-toggle"
                            ng-click="togglePathDetails()"
                            ng-if="pathDisplayParts && pathDisplayParts.length > 0"
                        >
                            {{ isPathDetailsOpen ? 'íƒ‘ìŠ¹ ìƒì„¸ â–²' : 'íƒ‘ìŠ¹ ìƒì„¸ â–¼' }}
                        </button>
                    </div>
                </div>

                <!-- (íƒ‘ìŠ¹ ìƒì„¸ëŠ” ì¢Œì¸¡ ë“œë¡œì–´ë¡œ ì´ë™) -->
                <!-- ê²½ë¡œ ìš”ì•½(ê°„ê²°) + ìƒì„¸ í¼ì¹¨ ë -->
</div>

            <!-- ì§€ë„ í”„ë ˆì„ -->
            <div class="bus-map-frame">
                <div id="map1" class="bus-map-canvas"></div>

                <div class="map-loading-badge" ng-show="isMapLoading">
                    ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...
                </div>
            </div>
        </div>

        <!-- ìš°ì¸¡: ì»¨íŠ¸ë¡¤ íŒ¨ë„ -->
        <aside class="bus-sidebar">
            
            <!-- 0) [ì¶”ê°€] ë‚´ ì¦ê²¨ì°¾ê¸° (ì ‘ì´ì‹ UI) -->
            <section class="sidebar-block" ng-if="userId && bmkList && bmkList.length > 0">
                <div class="sidebar-title" ng-click="isFavExpanded = !isFavExpanded" style="cursor: pointer; display: flex; justify-content: space-between;">
                    <span>â˜… ë‚´ ì¦ê²¨ì°¾ê¸°</span>
                    <span>{{ isFavExpanded ? 'â–¼' : 'â–¶' }}</span>
                </div>
                
                <div class="sidebar-list" ng-show="isFavExpanded" style="max-height: 200px; overflow-y: auto; margin-bottom: 10px; transition: all 0.3s;">
                    <ul class="stop-list">
                        <li ng-repeat="bmk in bmkList" ng-click="selectBookmark(bmk)" style="cursor: pointer;">
                            <div class="stop-left" style="display: flex; align-items: center; overflow: hidden;">
                                <span style="color: #FFD700; margin-right: 5px; flex-shrink: 0;">â˜…</span>
                                <span class="stop-title" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ bmk.alias || bmk.target_id }}</span>
                                <span class="badge" style="font-size: 0.7em; margin-left: 5px;" ng-if="bmk.target_type=='BUS'">ë²„ìŠ¤</span>
                                
                                <!-- [ì‹ ê·œ] ì¶œë°œ/ë„ì°© ë²„íŠ¼ (STOPì¸ ê²½ìš°ë§Œ) -->
                                <span ng-if="bmk.target_type=='STOP'" style="margin-left: 10px; display: flex; gap: 4px;">
                                    <button class="btn-mini" 
                                            ng-click="setFavAsStart(bmk); $event.stopPropagation()"
                                            title="ì¶œë°œì§€ë¡œ ì„¤ì •"
                                            style="padding: 2px 5px; font-size: 0.7em; cursor: pointer;">
                                        ì¶œë°œ
                                    </button>
                                    <button class="btn-mini" 
                                            ng-click="setFavAsEnd(bmk); $event.stopPropagation()"
                                            title="ë„ì°©ì§€ë¡œ ì„¤ì •"
                                            style="padding: 2px 5px; font-size: 0.7em; cursor: pointer;">
                                        ë„ì°©
                                    </button>
                                </span>
                            </div>
                        </li>
                    </ul>
                </div>
            </section>

            <!-- 1) ê²€ìƒ‰ & í•„í„° -->
            <section class="sidebar-block">
                <div class="sidebar-title">1. ê²€ìƒ‰ & í•„í„°</div>

                <div class="sidebar-row">
                    <label class="bus-radio-label">
                        <input type="radio" ng-model="searchType" value="route" />
                        <span>ğŸšŒ ë²„ìŠ¤</span>
                    </label>

                    <label class="bus-radio-label">
                        <input type="radio" ng-model="searchType" value="stop" />
                        <span>ğŸš ì •ë¥˜ì¥</span>
                    </label>

                    <button
                        type="button"
                        ng-click="toggleTramLayer()"
                        class="btn-tram-toggle"
                        ng-class="{'active': isTramVisible}"
                    >
                        ğŸš‹ íŠ¸ë¨ {{ isTramVisible ? 'ì§€ìš°ê¸°' : 'ë³´ì´ê¸°' }}
                    </button>
                </div>

                <div class="sidebar-row sidebar-search">
                    <div style="position: relative; flex: 1;">
                        <input
                            type="text"
                            ng-model="searchKeyword"
                            class="bus-dashboard-input"
                            style="width: 100%; padding-right: 30px;"
                            placeholder="{{ searchType == 'route' ? 'ë²„ìŠ¤ ë²ˆí˜¸ ì…ë ¥ (ì˜ˆ: 202)' : 'ì •ë¥˜ì¥ ì´ë¦„ ì…ë ¥' }}"
                            ng-keyup="$event.keyCode == 13 && doSearch()"
                        />
                        <span 
                            ng-show="searchKeyword" 
                            ng-click="clearAllSearch()" 
                            style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #999; font-weight: bold; font-size: 1.2em;" 
                            title="ì´ˆê¸°í™”"
                        >
                            &times;
                        </span>
                    </div>

                    <button type="button" ng-click="doSearch()" class="btn-bus-action" style="margin-left: 5px;">
                        ê²€ìƒ‰
                    </button>
                </div>
            </section>

            <!-- 2) ê²½ë¡œ ì„¤ì • -->
            <section class="sidebar-block">
                <div class="sidebar-title">2. ê²½ë¡œ ì„¤ì •</div>

                <div class="path-config">
                    <div class="path-line">
                        <span class="path-label">ì¶œë°œ</span>
                        <span class="path-value">
                            {{ (pathStartStop && (pathStartStop.nodenm || pathStartStop.stationName)) || 'ë¯¸ì„ íƒ' }}
                        </span>
                        <button
                            type="button"
                            class="btn-mini"
                            ng-click="clearPathStart && clearPathStart()"
                            title="ì¶œë°œ ì„ íƒ í•´ì œ"
                        >
                            X
                        </button>
                    </div>

                    <div class="path-line">
                        <span class="path-label">ë„ì°©</span>
                        <span class="path-value">
                            {{ (pathEndStop && (pathEndStop.nodenm || pathEndStop.stationName)) || 'ë¯¸ì„ íƒ' }}
                        </span>
                        <button
                            type="button"
                            class="btn-mini"
                            ng-click="clearPathEnd && clearPathEnd()"
                            title="ë„ì°© ì„ íƒ í•´ì œ"
                        >
                            X
                        </button>
                    </div>


                    <div class="path-line">
                        <span class="path-label">í™˜ìŠ¹</span>
                        <span class="path-value">
                            <input
                                type="number"
                                ng-model="pathMaxTransfers"
                                min="0"
                                max="10"
                                step="1"
                                class="input-mini"
                                title="í—ˆìš© í™˜ìŠ¹ íšŸìˆ˜ (0=ì§í–‰ë§Œ, 1=1íšŒ í™˜ìŠ¹ê¹Œì§€, ...)"
                            />
                            <span class="path-subhint">íšŒ (0=ì§í–‰)</span>
                        </span>
                    </div>

                    <div class="path-actions">
                        <button
                            type="button"
                            ng-click="solvePath()"
                            class="btn-path-action primary"
                            title="ì„ íƒí•œ ì¶œë°œ/ë„ì°© ì •ë¥˜ì¥ìœ¼ë¡œ ê²½ë¡œ íƒìƒ‰"
                        >
                            â–¶ ê²½ë¡œ íƒìƒ‰
                        </button>

                        <button
                            type="button"
                            ng-click="clearResultPath()"
                            class="btn-path-action danger"
                            title="ê²½ë¡œ ë° ì„ íƒ ì´ˆê¸°í™”"
                        >
                            â†º ì´ˆê¸°í™”
                        </button>
                    </div>
                </div>
            </section>

            <!-- 3) ìƒíƒœ & ì œì–´: ì œê±°ë¨ -->

            <!-- 4) ëª©ë¡ ë¦¬ìŠ¤íŠ¸(ì—¬ê¸°ë§Œ ìŠ¤í¬ë¡¤) -->
            <section class="sidebar-block sidebar-list-block">
                <div class="sidebar-title">
                    3. ëª©ë¡ ë¦¬ìŠ¤íŠ¸
                    <span class="sidebar-sub" ng-if="stops && stops.length">(ì´ {{ stops.length }}ê°œ)</span>
                </div>

                <div class="sidebar-list">
                    <ul class="stop-list" ng-if="stops && stops.length">
                        <li
                            ng-repeat="s in stops track by $index"
                            ng-click="selectStop(s)"
                            ng-class="{'active': (selectedStop === s)}"
                        >
                            <div class="stop-left">
                                <div class="stop-name">
                                    <span class="stop-index">{{$index + 1}}.</span>
                                    <span class="stop-title">{{ s.nodenm || s.stationName || 'ì´ë¦„ ì—†ìŒ' }}</span>
                                </div>
                                <div class="stop-id">{{ s.nodeid || s.nodeId }}</div>
                            </div>

                            <div class="stop-actions">
                                <button
                                    type="button"
                                    class="btn-mini star"
                                    ng-click="$event.stopPropagation(); toggleBookmark('STOP', s)"
                                    title="ì¦ê²¨ì°¾ê¸°"
                                >
                                    {{ s.isBookmarked ? 'â˜…' : 'â˜†' }}
                                </button>
                                <button
                                    type="button"
                                    class="btn-mini start"
                                    ng-click="$event.stopPropagation(); setPathStart(s)"
                                >
                                    ì¶œë°œ
                                </button>
                                <button
                                    type="button"
                                    class="btn-mini end"
                                    ng-click="$event.stopPropagation(); setPathEnd(s)"
                                >
                                    ë„ì°©
                                </button>
                            </div>
                        </li>
                    </ul>

                    <div class="panel-empty-msg" ng-if="!stops || !stops.length">
                        ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
                    </div>
                </div>
            </section>
        </aside>
    </div>

    <!-- í•˜ë‹¨ ì •ë³´ íŒ¨ë„ -->
    <div class="bus-bottom-sheet">
        <input id="arrivalSheetToggle" type="checkbox" class="sheet-toggle" />

        <label class="sheet-handle" for="arrivalSheetToggle">
            <span class="sheet-title">â±ï¸ ë„ì°© ì˜ˆì • ì •ë³´</span>
            <span class="sheet-sub" ng-if="currentStop">- {{ currentStop.nodenm }}</span>
            <span class="sheet-hint">í´ë¦­í•˜ì—¬ ì—´ê¸°/ë‹«ê¸°</span>
        </label>

        <div class="sheet-body">
            <table class="arrival-info-table" ng-if="arrivalList && arrivalList.length">
                <thead>
                    <tr>
                        <th>ë…¸ì„ </th>
                        <th style="text-align: center">ìœ„ì¹˜</th>
                        <th style="text-align: right">ë„ì°© ì˜ˆì •</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="a in arrivalList">
                        <td><strong>{{ a.routeno || a.routenm || '-' }}</strong></td>
                        <td style="text-align: center">
                            <span class="pill">{{ a.remainStops != null ? a.remainStops + 'ë²ˆì§¸ ì „' : '-' }}</span>
                        </td>
                        <td style="text-align: right">
                            <span class="arrival-highlight" ng-if="a.remainMinutes != null">
                                ì•½ {{ a.remainMinutes }}ë¶„ í›„
                            </span>
                            <span ng-if="a.remainMinutes == null">
                                {{ a.arrtime ? (a.arrtime + 'ì´ˆ í›„') : '-' }}
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div class="panel-empty-msg" ng-if="!currentStop">
                ìš°ì¸¡ ëª©ë¡ì—ì„œ ì •ë¥˜ì¥ì„ ì„ íƒí•´ì£¼ì„¸ìš”.
            </div>

            <div class="panel-empty-msg" ng-if="currentStop && (!arrivalList || !arrivalList.length)">
                í˜„ì¬ ë„ì°© ì˜ˆì •ì¸ ë²„ìŠ¤ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.
            </div>
        </div>
    </div>
</div>

<!-- ìˆ˜ì •ë¨ ë -->
