<!-- 수정됨: 대용량 게시판 총 개수 하단 표시 + pageSize 입력/적용 기능 추가 -->

<div class="container" ng-controller="BigPostController">
    <div class="action-bar">
        <h1>대용량 게시판</h1>

        <div style="margin-left: auto; display: flex; align-items: center; gap: 10px">
            <div style="color: #666;">
                ※ 총 게시글 수: <strong>{{ totalItems | number }}</strong> 건
            </div>

            <!-- 새 글 쓰기 버튼 -->
            <a href="#!/big-posts/new" class="action-btn create-btn">글쓰기</a>
        </div>
    </div>

    <!-- ▼ 총 개수 아래: pageSize 정보 + 변경 입력 영역 ▼ -->
    <div style="margin-top: 10px; display: flex; align-items: center; gap: 20px;">
        <div style="color: #666;">
            총 <strong>{{ totalItems | number }}</strong> 건 중
            한 번에 <strong>{{ pageSize | number }}</strong> 개씩 불러오는 중
        </div>

        <div>
            <label for="pageSizeInput">한 번에 가져올 개수:</label>
            <input
                id="pageSizeInput"
                type="number"
                min="1"
                max="10000"
                ng-model="pageSizeInput"
                style="width: 100px; margin-left: 5px; text-align: right;"
            />
            <button
                type="button"
                class="action-btn"
                ng-click="applyPageSize()"
                style="margin-left: 5px;"
            >
                적용
            </button>
        </div>
    </div>
    <!-- ▲ 총 개수 아래 영역 끝 ▲ -->

    <table class="user-table">
        <thead>
            <tr>
                <th style="width: 10%">번호</th>
                <th style="width: 50%">제목</th>
                <th style="width: 20%">작성자</th>
                <th style="width: 20%">작성일</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="post in postList">
                <!-- 표시용 연속 번호 -->
                <td>{{ getRowNumber($index) | number }}</td>

                <!-- 제목 클릭 → 상세 페이지 -->
                <td>
                    <a href="#!/big-posts/{{ post.post_id }}">
                        {{ post.title }}
                    </a>
                </td>

                <td>{{ post.user_id }}</td>
                <td>{{ post.created_at | date:'yyyy-MM-dd HH:mm' }}</td>
            </tr>

            <tr ng-if="!postList.length">
                <td colspan="4" style="text-align: center; color: #999;">
                    등록된 게시글이 없습니다.
                </td>
            </tr>
        </tbody>
    </table>

    <div style="margin-top: 15px; text-align: center;">
        <button
            ng-click="goToPage(currentPage - 1)"
            ng-disabled="currentPage <= 1"
            class="action-btn"
        >
            &lt; 이전
        </button>

        <span style="margin: 0 15px; font-weight: bold;">
            Page {{ currentPage }} / {{ totalPages }}
        </span>

        <button
            ng-click="goToPage(currentPage + 1)"
            ng-disabled="currentPage >= totalPages"
            class="action-btn"
        >
            다음 &gt;
        </button>
    </div>
</div>

<!-- 수정됨 끝 -->
